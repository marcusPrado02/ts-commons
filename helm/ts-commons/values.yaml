# ── Global ─────────────────────────────────────────────────────────────────────
global:
  imageRegistry: ""
  imagePullSecrets: []

# ── Image ──────────────────────────────────────────────────────────────────────
image:
  repository: ts-commons
  tag: "1.0.0"
  pullPolicy: IfNotPresent

# ── Replica count ─────────────────────────────────────────────────────────────
replicaCount: 2

# ── Service account ───────────────────────────────────────────────────────────
serviceAccount:
  create: true
  name: ""
  annotations: {}

# ── Pod ───────────────────────────────────────────────────────────────────────
podAnnotations: {}
podLabels: {}
podSecurityContext:
  runAsNonRoot: true
  runAsUser: 1001
  fsGroup: 1001

# ── Container ─────────────────────────────────────────────────────────────────
containerSecurityContext:
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: true
  capabilities:
    drop:
      - ALL

# ── Service ───────────────────────────────────────────────────────────────────
service:
  type: ClusterIP
  port: 80
  targetPort: 3000
  annotations: {}

# ── Resources ─────────────────────────────────────────────────────────────────
resources:
  requests:
    cpu: 100m
    memory: 128Mi
  limits:
    cpu: 500m
    memory: 512Mi

# ── Probes ────────────────────────────────────────────────────────────────────
livenessProbe:
  httpGet:
    path: /healthz
    port: http
  initialDelaySeconds: 10
  periodSeconds: 30
  timeoutSeconds: 5
  failureThreshold: 3

readinessProbe:
  httpGet:
    path: /readyz
    port: http
  initialDelaySeconds: 5
  periodSeconds: 10
  timeoutSeconds: 3
  failureThreshold: 3

# ── Autoscaling ───────────────────────────────────────────────────────────────
autoscaling:
  enabled: false
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 70
  targetMemoryUtilizationPercentage: 80

# ── PodDisruptionBudget ───────────────────────────────────────────────────────
podDisruptionBudget:
  enabled: true
  minAvailable: 1

# ── Ingress ───────────────────────────────────────────────────────────────────
ingress:
  enabled: false
  className: nginx
  annotations: {}
  host: ts-commons.example.com
  paths:
    - path: /
      pathType: Prefix
  tls:
    enabled: false
    secretName: ts-commons-tls

# ── Environment variables ─────────────────────────────────────────────────────
env:
  NODE_ENV: production
  PORT: "3000"
  DOCKER_CONTAINER: "true"
  LOG_LEVEL: info

# ── Secrets (referenced from existing Secret) ────────────────────────────────
envFrom: []
# - secretRef:
#     name: my-secret

# ── App config (goes into ConfigMap) ─────────────────────────────────────────
config:
  APP_VERSION: "1.0.0"
  METRICS_ENABLED: "true"
  SHUTDOWN_TIMEOUT_MS: "10000"

# ── Network policy ────────────────────────────────────────────────────────────
networkPolicy:
  enabled: false
  allowIngressFromNamespace: ingress-nginx

# ── Node selectors / tolerations / affinity ──────────────────────────────────
nodeSelector: {}
tolerations: []
affinity: {}

# ── Termination ───────────────────────────────────────────────────────────────
terminationGracePeriodSeconds: 30
